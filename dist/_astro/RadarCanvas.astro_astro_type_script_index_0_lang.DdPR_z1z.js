import{d as D,s as F,a as U}from"./canvas-core.C1WeeQst.js";import"./index.CH_iu5NA.js";const d=Math.PI*2,M=e=>(e%d+d)%d,E=(e,t)=>{let i=M(e)-M(t);return i>Math.PI&&(i-=d),i<-Math.PI&&(i+=d),i},v=(e,t,i,h=.013)=>(e=M(e),t=M(t),i=M(i),e===t?Math.abs(E(i,t))<=h:t>e?i>=e-h&&i<=t+h:i>=e-h||i<=t+h);D('canvas[data-canvas="radar"]',e=>{const{ctx:t,destroy:i}=F(e),h=Number(e.dataset.speed??"1")||1,g=(e.dataset.color??"#00ffb4").toString(),N=Math.max(6,Math.min(64,Number(e.dataset.blips??"16")||16)),W=Number(e.dataset.lifeSpeed??"0.01"),b=Math.min(.45,Math.max(.05,Number(e.dataset.fadePortion??"0.18"))),B=Math.min(1,Math.max(0,Number(e.dataset.fadeOnHit??"0.35"))),G=Math.max(0,Number(e.dataset.hitCooldown??"0.2")),R=Number(e.dataset.pingSpeed??"0.035");let T=0,p=0,r=0;const y=[],m=(n,c)=>{const l=n.startsWith("#")?n.slice(1):n,u=l.length===3?l.split("").map(w=>w+w).join(""):l,f=parseInt(u,16),s=f>>16&255,o=f>>8&255,C=f&255;return`rgba(${s},${o},${C},${c})`},x=()=>Math.random()*d;function I(n,c,l,u){const f=c+(Math.random()-.5)*(d*.01),s=Math.sqrt(Math.random())*r*(.85+Math.random()*.15);n.x=l+Math.cos(f)*s,n.y=u+Math.sin(f)*s,n.r=1.8+Math.random()*2.4}function $(){y.length=0;const{width:n,height:c}=e.getBoundingClientRect();r=Math.min(n,c)*.4;for(let l=0;l<N;l++)y.push({x:null,y:null,r:2,state:"hidden",phaseT:0,ping:-1,lastHitT:-999,spawnAngle:x()})}$();const A=new ResizeObserver(()=>{const{width:n,height:c}=e.getBoundingClientRect();r=Math.min(n,c)*.4});A.observe(e);function H(n){return n.state==="fadein"?Math.min(1,n.phaseT/b):n.state==="hold"?1:n.state==="fadeout"?Math.max(0,1-n.phaseT/b):0}function O(n){const c=p,l=n*h*(d/(6*60));T+=.01*n*h,p=M(p+l);const{width:u,height:f}=e.getBoundingClientRect(),s=u/2,o=f/2;t.clearRect(0,0,u,f),U(t,u,f,T),t.save(),t.strokeStyle="rgba(255,255,255,0.12)",t.lineWidth=1;for(let a=1;a<=5;a++)t.beginPath(),t.arc(s,o,r*a/5,0,d),t.stroke();t.beginPath(),t.moveTo(s-r,o),t.lineTo(s+r,o),t.moveTo(s,o-r),t.lineTo(s,o+r),t.stroke(),t.restore();const C=d*.05,w=p-C,S=t.createRadialGradient(s,o,0,s,o,r);S.addColorStop(0,m(g,0)),S.addColorStop(.7,m(g,.06)),S.addColorStop(1,m(g,.18)),t.save(),t.fillStyle=S,t.beginPath(),t.moveTo(s,o),t.arc(s,o,r,w,p),t.closePath(),t.fill(),t.strokeStyle=m(g,.9),t.lineWidth=2,t.beginPath(),t.arc(s,o,r,p-.002,p+.002),t.stroke(),t.restore();for(const a of y){if(a.state==="hidden"){v(c,p,a.spawnAngle)&&(a.lastHitT=T,I(a,a.spawnAngle,s,o),a.state="fadein",a.phaseT=0,a.ping=0);continue}const j=Math.atan2(a.y-o,a.x-s);if(v(c,p,j)&&T-a.lastHitT>=G&&(a.state==="fadein"||a.state==="hold")&&(a.lastHitT=T,Math.random()<B&&(a.state="fadeout",a.phaseT=0),a.ping=0),(a.state==="fadein"||a.state==="fadeout")&&(a.phaseT+=n*W*h,a.state==="fadein"&&a.phaseT>=b&&(a.state="hold",a.phaseT=0),a.state==="fadeout"&&a.phaseT>=b)){a.state="hidden",a.phaseT=0,a.ping=-1,a.spawnAngle=x(),a.x=a.y=null;continue}if(a.ping>=0&&a.ping<=1){const q=a.r+a.ping*18,z=(1-a.ping)*.4*(.25+.75*H(a));t.strokeStyle=m(g,z),t.lineWidth=2,t.beginPath(),t.arc(a.x,a.y,q,0,d),t.stroke(),a.ping+=n*R*h}const k=H(a);k>0&&(t.fillStyle=m(g,.9*(.25+.75*k)),t.beginPath(),t.arc(a.x,a.y,a.r,0,d),t.fill())}const P=t.createRadialGradient(s,o,0,s,o,24);P.addColorStop(0,m(g,.15)),P.addColorStop(1,m(g,0)),t.fillStyle=P,t.beginPath(),t.arc(s,o,24,0,d),t.fill()}return{ctx:t,destroy(){A.disconnect(),i()},update:O}});
